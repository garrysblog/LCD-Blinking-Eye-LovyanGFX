# Image to RGB565 Array Converter for Arduino

A web-based tool that converts images to RGB565 C arrays for use with Arduino and LovyanGFX library. This tool and these instructions were generated by Claude AI

## Overview

This converter transforms regular image files (PNG, JPG, GIF, etc.) into C/C++ arrays that Arduino can store in flash memory and display on RGB565 LCD screens.

## What It Does

The converter performs the following operations:

1. **Reads your image** - Accepts any common format (PNG, JPG, GIF, BMP)
2. **Extracts pixel data** - Gets the color value of every pixel
3. **Converts colors** - Transforms from RGB888 (24-bit) to RGB565 (16-bit)
4. **Generates C code** - Creates a properly formatted C array with hex values
5. **Outputs a header file** - Produces a `.h` file ready to include in Arduino projects

### Example Output
```cpp
// Image: eye
// Size: 240x240
// Array size: 112.5 KB

#ifndef EYE_H
#define EYE_H

const int EYE_WIDTH = 240;
const int EYE_HEIGHT = 240;

const uint16_t eye_data[57600] PROGMEM = {
  0xF800, 0x07E0, 0x001F, 0xFFE0, 0xF81F, 0x07FF, ...
};

#endif
```

## Why Is This Required?

### Problem 1: Arduino Can't Read Image Files Directly

Arduino microcontrollers don't natively understand PNG, JPG, or other image formats. They need:
- Raw color data
- In a specific format (RGB565)
- As C arrays that can be compiled into the program

### Problem 2: Memory Constraints

Arduino has very limited RAM (typically 2KB-8KB), so:
- Images must be stored in **flash memory** using the `PROGMEM` keyword
- Can't dynamically load full-resolution images like computers can
- Requires efficient 16-bit color format instead of 24-bit

### Problem 3: Color Format Mismatch

**Standard Image Format (RGB888 - 24-bit):**
- Red: 8 bits (0-255)
- Green: 8 bits (0-255)
- Blue: 8 bits (0-255)
- Total: 16.7 million colors

**LCD Display Format (RGB565 - 16-bit):**
- Red: 5 bits (0-31)
- Green: 6 bits (0-63)
- Blue: 5 bits (0-31)
- Total: 65,536 colors

The converter performs the mathematical conversion to compress colors properly.

## Features

- ✅ Drag & drop or click to upload images
- ✅ Instant RGB565 conversion with Floyd-Steinberg dithering
- ✅ Live preview of converted image
- ✅ Shows dimensions and file size
- ✅ Warns about large files (>500KB)
- ✅ Download as `.h` header file
- ✅ Copy to clipboard option
- ✅ Works completely offline
- ✅ No installation required
- ✅ Cross-platform (Windows, Mac, Linux)

## Usage

### 1. Convert Your Image

1. Open the HTML file in any web browser
2. Upload your image (drag & drop or click to browse)
3. Review the preview and generated code
4. Download the `.h` file

### 2. Add to Arduino Project
```cpp
#include <LovyanGFX.hpp>
#include "eye_data.h"  // Your converted image

LGFX lcd;

void setup() {
  lcd.init();
  lcd.setRotation(1);
  
  // IMPORTANT: Set byte swap for correct colors
  lcd.setSwapBytes(true);
  
  // Display the image
  lcd.pushImage(0, 0, EYE_WIDTH, EYE_HEIGHT, eye_data);
}

void loop() {
  // Nothing needed
}
```

### 3. Configure Partition Scheme

For large images, adjust your Arduino IDE partition scheme:

**Tools → Partition Scheme:**
- Images < 1MB: "Minimal SPIFFS (1.9MB APP with OTA)"
- Images 1-3MB: "Default 4MB with spiffs (1.2MB APP/1.5MB SPIFFS)"
- Images > 3MB: "Huge APP (3MB No OTA/1MB SPIFFS)"

## Memory Considerations

| Image Size | Array Size | Recommended Storage |
|------------|-----------|---------------------|
| 100x100 | ~20KB | Embedded array |
| 240x240 | ~112KB | Embedded array |
| 320x240 | ~150KB | Embedded array |
| 480x320 | ~300KB | Consider SD card |

**Note:** For multiple large images or images over 300KB, consider using SD card storage with JPG format instead:
```cpp
#include <SD.h>

void setup() {
  lcd.init();
  SD.begin();
  
  // Display full 24-bit color JPG from SD card
  lcd.drawJpgFile(SD, "/eye.jpg", 0, 0);
}
```

## Technical Details

### Color Conversion Algorithm

The converter uses Floyd-Steinberg dithering to minimize color banding when converting from 24-bit to 16-bit color:
```javascript
// RGB888 to RGB565 conversion
const rgb565 = ((r & 0xF8) << 8) | ((g & 0xFC) << 3) | (b >> 3);
```

### Supported Displays

Compatible with common Arduino RGB565 LCD displays:
- ILI9341 (240×320)
- ST7735 (128×160)
- ST7789 (240×240)
- GC9A01 (240×240 round)
- ILI9488 (320×480)

## Limitations

### Display Hardware Limitations

RGB565 displays are limited to 65,536 colors. Images with:
- ✅ Logos and icons - Work well
- ✅ Flat color graphics - Work well
- ✅ UI elements - Work well
- ⚠️ Photos with gradients - May show color banding
- ⚠️ Sunset/sunrise scenes - May show color banding
- ⚠️ Rainbow effects - May show color banding

This is a hardware limitation of the display, not the converter.

## Best Practices

1. **Test with small images first** to verify your setup
2. **Use `lcd.setSwapBytes(true)`** if colors appear wrong
3. **Pre-process images** to target resolution before converting
4. **Consider SD card storage** for multiple large images
5. **Use indexed color (256 colors)** in image editor before converting for better results

## Technologies Used

- **HTML5** - Structure and layout
- **CSS3** - Styling and design
- **JavaScript** - Image processing and conversion
- **Canvas API** - Pixel data extraction

The converter runs entirely in your browser with no server or internet connection required.

## Troubleshooting

| Issue | Solution |
|-------|----------|
| Colors look wrong/inverted | Add `lcd.setSwapBytes(true);` |
| Image won't compile | Check partition scheme for larger APP space |
| Out of memory error | Reduce image size or use SD card |
| Color banding in gradients | Normal for RGB565 - consider SD card with JPG |

## License

Feel free to use this tool for any personal or commercial projects.

---

**Note:** This tool is specifically designed for Arduino projects using the LovyanGFX library with RGB565 displays.
